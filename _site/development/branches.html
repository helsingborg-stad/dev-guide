<h1 id="branches">Branches</h1>

<h2 id="strategy">Strategy</h2>
<p>We are using gitflow as our branching strategy with a temporary stable <code class="language-plaintext highlighter-rouge">release</code> branch used before merge between <code class="language-plaintext highlighter-rouge">dev</code> and <code class="language-plaintext highlighter-rouge">master</code> as dev is considered semi stable with continous updates.
<img src="images/git-model@2x.png" alt="Gitflow example" title="Gitflow" /></p>

<h3 id="gitflow-articles">Gitflow articles</h3>
<p><a href="https://nvie.com/posts/a-successful-git-branching-model/">A successful Git branching model</a><br />
<a href="https://www.atlassian.com/git/tutorials/comparing-workflows/gitflow-workflow">Gitflow Workflow</a></p>

<h2 id="naming-convention">Naming convention</h2>
<p>Our main branch for production code should be called <code class="language-plaintext highlighter-rouge">master</code>.<br />
For all other purposes the allowed branch names starts with a prefix, a slash(/) and then you feature name with words seperated by a dash(-).<br />
ex.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>feat/example-feature
</code></pre></div></div>

<p>List of allowed prefixes:<br />
| prefix  | Description                                                                                             |
| ——- | ——————————————————————————————————–|
| feat    | (Feature) A new feature.                                                                                |
| fix     | (Bug fix) A bug Fix.                                                                                    |
| hotfix  | (Hot fix) A fix to patch production code.                                                               |
| docs    | (Documentation) Documentation only changes.                                                             |
| perf    | (Code Refactoring) Code changes that improves performance.                                              |
| wip     | (Work In Progress) A code change that won’t be finished soon.                                           |
| test    | (TESTS) Adding missing tests or correcting existing tests.                                              |
| ci      | (Continuous Integrations) Changes to our CI configuration files and scripts (example scope: CircleCi).  |
| build   | (Builds) Changes that affect the build system or external dependencies (example scope: npm).            |
| release | (Release) Preparation of a new production release.                                                      |</p>

<h2 id="release-branch-naming-convention">Release branch naming convention</h2>
<p>The <code class="language-plaintext highlighter-rouge">release</code> branches purpose is to be a stable branch to be merged merged with the <code class="language-plaintext highlighter-rouge">master</code> branch.
release branches is only allowed to have a semantic version as “feature name”.<br />
ex.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>release/1.0.0
</code></pre></div></div>

<h2 id="master-branch-version-tagging">Master branch version tagging.</h2>
<p>Whenever any branch whether it´s a <code class="language-plaintext highlighter-rouge">hotfix</code> or a <code class="language-plaintext highlighter-rouge">release</code> is merged into master a <a href="./versioning.md">SemVer</a> formed tag should be added to mark the merge.</p>

<h2 id="deployment">Deployment</h2>
<p>When a pull request is accepted and merged into any of the below branches a deploy pipeline will trigger pushing the accepted PR to different environments.</p>

<table>
  <thead>
    <tr>
      <th>branch</th>
      <th>Environments</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>dev</td>
      <td>develop</td>
    </tr>
    <tr>
      <td>master</td>
      <td>stage, test, production</td>
    </tr>
    <tr>
      <td>release</td>
      <td>release</td>
    </tr>
  </tbody>
</table>
